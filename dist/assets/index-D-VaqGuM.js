(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))h(n);new MutationObserver(n=>{for(const l of n)if(l.type==="childList")for(const p of l.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&h(p)}).observe(document,{childList:!0,subtree:!0});function a(n){const l={};return n.integrity&&(l.integrity=n.integrity),n.referrerPolicy&&(l.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?l.credentials="include":n.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function h(n){if(n.ep)return;n.ep=!0;const l=a(n);fetch(n.href,l)}})();const $=9.81,m=30,B=800,u=500,se="#795548",_="#FF9800",oe="#FF0000",q=.2,D=q*m,le="#4CAF50",f=30,T=0,R=50,U=.016,W=7,b=document.getElementById("simulationCanvas"),s=b.getContext("2d"),c=document.getElementById("ledgeHeight"),g=document.getElementById("launchSpeed"),v=document.getElementById("launchAngle"),G=document.getElementById("ledgeHeightValue"),N=document.getElementById("launchSpeedValue"),V=document.getElementById("launchAngleValue"),F=document.getElementById("simulateButton"),ie=document.getElementById("resetButton"),k=document.getElementById("resultRange"),K=document.getElementById("resultMaxHeight"),z=document.getElementById("resultTimeOfFlight"),C=document.getElementById("safetyAdvisoryPanelDiv"),X=document.getElementById("safetyAdvisoryMessage");let i=null,d=0,S=[],o=parseFloat(c.value),J=parseFloat(g.value),Q=parseFloat(v.value);function ce(e){return e*(Math.PI/180)}function r(e,t,a=""){t.textContent=`${e.value}${a}`}function I(){s.clearRect(0,0,B,u)}function x(){s.fillStyle=le,s.fillRect(0,u-f,B,f)}function L(e){const t=e*m,a=u-f-t;s.fillStyle=se,s.fillRect(T,a,R,t)}function P(e,t,a){s.beginPath(),s.arc(e,t,D,0,Math.PI*2),s.fillStyle=a,s.fill(),s.closePath()}function j(e){if(!(e.length<2)){s.beginPath(),s.moveTo(e[0].x,e[0].y);for(let t=1;t<e.length;t++)s.lineTo(e[t].x,e[t].y);s.strokeStyle="rgba(0, 0, 0, 0.5)",s.lineWidth=2,s.stroke(),s.closePath()}}function re(e){const t=e>W;let a;return t?a=`ALERT: A fall from ${e.toFixed(1)} meters exceeds the critical safety threshold of ${W.toFixed(1)} meters. This height presents a high risk of severe injury or fatality to the cat.`:a=`NOTICE: A fall from ${e.toFixed(1)} meters is below the critical safety threshold. While the immediate risk of severe injury is lower, all falls can potentially cause harm. Monitor the cat.`,{isAdverseEvent:t,outcomeMessage:a}}function ue(e){X.textContent=e.outcomeMessage,C.classList.remove("adverse-event","notice-event"),e.isAdverseEvent?C.classList.add("adverse-event"):C.classList.add("notice-event")}function de(e,t){const a=ce(t),h=e*Math.cos(a),n=e*Math.sin(a);return{vx0:h,vy0:n}}function M(){k.textContent="--",K.textContent="--",z.textContent="--",X.textContent="",C.className="safety-advisory-panel"}function me(e,t,a){k.textContent=e.toFixed(2),K.textContent=t.toFixed(2),z.textContent=a.toFixed(2)}function Z(){d+=U;const{vx0:e,vy0:t}=de(J,Q),a=e*d,h=t*d-.5*$*d*d,n=o+h,l=T+R,p=u-f-o*m,E=l+a*m,O=p-h*m;S.push({x:E,y:O}),I(),x(),L(o),j(S),P(E,O,_);const te=u-f;if(O+D>=te||n-q<=0){cancelAnimationFrame(i),i=null,F.disabled=!1;const H=d,ne=e*H;let y=o;for(let A=0;A<=H;A+=U){const ae=t*A-.5*$*A*A,Y=o+ae;Y>y&&(y=Y)}y=Math.max(0,y);const w=re(y);ue(w),me(ne,y,H),I(),x(),L(o),j(S),P(E,O,w.isAdverseEvent?oe:_);return}if(E>B+D*5||E<-6*5){cancelAnimationFrame(i),i=null,F.disabled=!1,M(),X.textContent="Cat flew off-screen. Simulation stopped.",C.className="safety-advisory-panel notice-event";return}i=requestAnimationFrame(Z)}function fe(){i&&cancelAnimationFrame(i),d=0,S=[],M(),o=parseFloat(c.value),J=parseFloat(g.value),Q=parseFloat(v.value),F.disabled=!0,I(),x(),L(o);const e=T+R,t=u-f-o*m;P(e,t,_),i=requestAnimationFrame(Z)}function ee(){i&&(cancelAnimationFrame(i),i=null),d=0,S=[],c.value="2.0",g.value="5.0",v.value="30",r(c,G," m"),r(g,N," m/s"),r(v,V,"°"),o=parseFloat(c.value),M(),F.disabled=!1,I(),x(),L(o);const e=T+R,t=u-f-o*m;P(e,t,_)}c.addEventListener("input",()=>{if(r(c,G," m"),!i){o=parseFloat(c.value),I(),x(),L(o);const e=T+R,t=u-f-o*m;P(e,t,_),M()}});g.addEventListener("input",()=>{r(g,N," m/s")});v.addEventListener("input",()=>{r(v,V,"°")});F.addEventListener("click",fe);ie.addEventListener("click",ee);function he(){b.width=B,b.height=u,r(c,G," m"),r(g,N," m/s"),r(v,V,"°"),ee()}he();
